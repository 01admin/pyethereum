# Running Guardian Nodes


## Generation of the `genesis.json` file.

This can be done in a single step that initializes the data directory using this command.

* `python ethereum/guardian/cli.py --data-dir path/to/datadir run --no-prompt --gen-genesis --do-reset --auto-init`

This will do all of the following.

* Initialize the data directory.
* Generate a new private key.
* Generate a genesis json file.
* Initialize the chaindata database.
* Run the guardian node.


Alternatively you can do this without running the node with:

* `python ethereum/guardian/cli.py --data-dir path/to/datadir init --no-prompt --gen-genesis --auto-init`


Or to only generate the genesis file.

* `python ethereum/guardian/cli.py --data-dir path/to/datadir generate_genesis --no-prompt`


## Running additional nodes.


To run additional nodes, you will need to provide them with the `genesis.json`
that was generated by the initial guardian node as well as informing them of
the location of the devp2p bootstrap nodes.

When you initialize and run the primary node you should see output like the following.


```shell
INFO:p2p.discovery	starting discovery proto this_enode=enode://9e0bf250f9e69c7c295064ec9c4d8aa43815bbd931737dacebc63eca2ecd7284c242e510bde3495b845b9d50434bbf78ca4b39120e1242edb3fca159bbb7372c@0.0.0.0:29870
INFO: 2016-05-05 11:45:45,253 Initializing Enode: `enode://9e0bf250f9e69c7c295064ec9c4d8aa43815bbd931737dacebc63eca2ecd7284c242e510bde3495b845b9d50434bbf78ca4b39120e1242edb3fca159bbb7372c@0.0.0.0:29870`
```

You need to take this `enode://...` address and place it in a json
configuration file like the following.


```javascript
{
    "port": 29871,
    "bootstrap_nodes": ["enode://9e0bf250f9e69c7c295064ec9c4d8aa43815bbd931737dacebc63eca2ecd7284c242e510bde3495b845b9d50434bbf78ca4b39120e1242edb3fca159bbb7372c@0.0.0.0:29870"]
}
```

This will allow your node to find the other guardian nodes.


In addition to this you will need to initialize a data directory for the new client.

* `python ethereum/guardian/cli.py --config path/to/config.json --data-dir path/to/datadir --genesis path/to/genesis.json init`

If the `genesis.json` is present within the data directory it does not need to
be specified.
